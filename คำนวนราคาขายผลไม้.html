<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≤‡∏¢‡∏ú‡∏•‡πÑ‡∏°‡πâ</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: -apple-system, BlinkMacSystemFont, sans-serif; background: #f5f5f5; padding: 20px; }
        .container { max-width: 450px; margin: 0 auto; background: white; border-radius: 10px; padding: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h1 { text-align: center; color: #333; margin-bottom: 20px; font-size: 20px; }
        .input-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; color: #555; font-weight: 500; }
        input { width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 5px; font-size: 16px; }
        input:focus { outline: none; border-color: #4CAF50; }
        button { width: 100%; padding: 12px; background: #4CAF50; color: white; border: none; border-radius: 5px; font-size: 16px; cursor: pointer; margin: 20px 0; }
        button:hover { background: #45a049; }
        .result { background: #f8f9fa; border-radius: 5px; padding: 15px; margin-top: 20px; display: none; }
        .result-item { display: flex; justify-content: space-between; margin-bottom: 8px; }
        .result-label { color: #555; }
        .result-value { font-weight: bold; color: #333; }
        .highlight { background: #e8f5e9; padding: 10px; border-radius: 5px; margin-top: 10px; }
        .loss-info { background: #fff3e0; padding: 10px; border-radius: 5px; margin-top: 10px; border-left: 4px solid #ff9800; }
        .tab-btn { 
            flex: 1; padding: 10px; background: #f8f9fa; border: none; border-bottom: 2px solid transparent; 
            cursor: pointer; font-size: 14px; color: #666; 
        }
        .tab-btn.active { background: white; border-bottom-color: #4CAF50; color: #4CAF50; font-weight: bold; }
        .tab-btn:hover { background: #f0f0f0; }
        .tab-content { animation: fadeIn 0.3s ease-in; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .help-text { font-size: 12px; color: #888; margin-top: 3px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üçé ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≤‡∏¢‡∏ú‡∏•‡πÑ‡∏°‡πâ</h1>
        
        <!-- Tab Navigation -->
        <div style="display: flex; margin-bottom: 20px; border-bottom: 2px solid #eee;">
            <button class="tab-btn active" onclick="switchTab('normal')">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏õ‡∏Å‡∏ï‡∏¥</button>
            <button class="tab-btn" onclick="switchTab('reverse')">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button>
            <button class="tab-btn" onclick="switchTab('minCost')">‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥</button>
        </div>
        
        <!-- Normal Calculation Tab -->
        <div id="normalTab" class="tab-content">
            <div class="input-group">
                <label>‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô (‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å.)</label>
                <input type="number" id="cost" step="0.01" placeholder="‡πÄ‡∏ä‡πà‡∏ô 50">
                <div class="help-text">‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏µ‡πà‡∏ã‡∏∑‡πâ‡∏≠‡∏°‡∏≤ (‡πÅ‡∏ö‡∏ö‡∏°‡∏µ‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å)</div>
            </div>
            
            <div class="input-group">
                <label>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Å‡∏¥‡πÇ‡∏•‡∏Å‡∏£‡∏±‡∏° ‡∏ó‡∏µ‡πà‡∏ã‡∏∑‡πâ‡∏≠‡∏°‡∏≤ (‡∏°‡∏µ‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å)</label>
                <input type="number" id="originalWeight" step="0.1" placeholder="‡πÄ‡∏ä‡πà‡∏ô 10">
                <div class="help-text">‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏£‡∏ß‡∏°‡∏ó‡∏µ‡πà‡∏ã‡∏∑‡πâ‡∏≠‡∏°‡∏≤ (‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏õ‡∏≠‡∏Å‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å)</div>
            </div>
            
            <div class="input-group">
                <label>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Å‡∏¥‡πÇ‡∏•‡∏Å‡∏£‡∏±‡∏° ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏õ‡∏≠‡∏Å‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å</label>
                <input type="number" id="weight" step="0.1" placeholder="‡πÄ‡∏ä‡πà‡∏ô 8">
                <div class="help-text">‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏´‡∏•‡∏±‡∏á‡∏õ‡∏≠‡∏Å‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß</div>
            </div>
            
            <div class="input-group">
                <label>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ñ‡∏∏‡∏á (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ó‡∏®‡∏ô‡∏¥‡∏¢‡∏°)</label>
                <input type="number" id="bags" step="0.1" placeholder="‡πÄ‡∏ä‡πà‡∏ô 20 ‡∏´‡∏£‡∏∑‡∏≠ 20.5">
            </div>
            
            <div class="input-group">
                <label>‡∏Å‡∏≥‡πÑ‡∏£‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ (‡∏ö‡∏≤‡∏ó)</label>
                <input type="number" id="profit" step="0.01" placeholder="‡πÄ‡∏ä‡πà‡∏ô 200">
            </div>
            
            <div style="text-align: center; margin: 20px 0; color: #666;">‡∏´‡∏£‡∏∑‡∏≠</div>
            
            <div class="input-group">
                <label>‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡∏ñ‡∏∏‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ (‡∏ö‡∏≤‡∏ó)</label>
                <input type="number" id="targetPrice" step="0.01" placeholder="‡πÄ‡∏ä‡πà‡∏ô 20">
            </div>
            
            <button onclick="calculate()">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì</button>
        </div>
        
        <!-- Reverse Calculation Tab -->
        <div id="reverseTab" class="tab-content" style="display: none;">
            <div class="input-group">
                <label>‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô (‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å.)</label>
                <input type="number" id="costRev" step="0.01" placeholder="‡πÄ‡∏ä‡πà‡∏ô 50">
                <div class="help-text">‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏µ‡πà‡∏ã‡∏∑‡πâ‡∏≠‡∏°‡∏≤ (‡πÅ‡∏ö‡∏ö‡∏°‡∏µ‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å)</div>
            </div>
            
            <div class="input-group">
                <label>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Å‡∏¥‡πÇ‡∏•‡∏Å‡∏£‡∏±‡∏° ‡∏ó‡∏µ‡πà‡∏ã‡∏∑‡πâ‡∏≠‡∏°‡∏≤ (‡∏°‡∏µ‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å)</label>
                <input type="number" id="originalWeightRev" step="0.1" placeholder="‡πÄ‡∏ä‡πà‡∏ô 10">
                <div class="help-text">‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏£‡∏ß‡∏°‡∏ó‡∏µ‡πà‡∏ã‡∏∑‡πâ‡∏≠‡∏°‡∏≤ (‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏õ‡∏≠‡∏Å‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å)</div>
            </div>
            
            <div class="input-group">
                <label>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Å‡∏¥‡πÇ‡∏•‡∏Å‡∏£‡∏±‡∏° ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏õ‡∏≠‡∏Å‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å</label>
                <input type="number" id="weightRev" step="0.1" placeholder="‡πÄ‡∏ä‡πà‡∏ô 8">
                <div class="help-text">‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏´‡∏•‡∏±‡∏á‡∏õ‡∏≠‡∏Å‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß</div>
            </div>
            
            <div class="input-group">
                <label>‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏ï‡πà‡∏≠‡∏ñ‡∏∏‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ (‡∏Å‡∏£‡∏±‡∏°)</label>
                <input type="number" id="targetWeight" placeholder="‡πÄ‡∏ä‡πà‡∏ô 500">
            </div>
            
            <div class="input-group">
                <label>‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå‡∏Å‡∏≥‡πÑ‡∏£‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ (%)</label>
                <input type="number" id="targetPercent" step="0.1" placeholder="‡πÄ‡∏ä‡πà‡∏ô 25">
            </div>
            
            <div style="text-align: center; margin: 20px 0; color: #666;">‡∏´‡∏£‡∏∑‡∏≠</div>
            
            <div class="input-group">
                <label>‡∏Å‡∏≥‡πÑ‡∏£‡∏£‡∏ß‡∏°‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ (‡∏ö‡∏≤‡∏ó)</label>
                <input type="number" id="targetProfitRev" step="0.01" placeholder="‡πÄ‡∏ä‡πà‡∏ô 200">
            </div>
            
            <button onclick="calculateReverse()">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button>
        </div>
        
        <!-- Minimum Cost Calculation Tab -->
        <div id="minCostTab" class="tab-content" style="display: none;">
            <div class="input-group">
                <label>‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡∏ñ‡∏∏‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ (‡∏ö‡∏≤‡∏ó)</label>
                <input type="number" id="targetSellPrice" step="0.01" placeholder="‡πÄ‡∏ä‡πà‡∏ô 25">
                <div class="help-text">‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏¢‡∏≤‡∏Å‡∏Ç‡∏≤‡∏¢‡πÉ‡∏ô‡∏ï‡∏•‡∏≤‡∏î</div>
            </div>
            
            <div class="input-group">
                <label>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Å‡∏¥‡πÇ‡∏•‡∏Å‡∏£‡∏±‡∏° ‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ã‡∏∑‡πâ‡∏≠ (‡∏°‡∏µ‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å)</label>
                <input type="number" id="plannedWeight" step="0.1" placeholder="‡πÄ‡∏ä‡πà‡∏ô 10">
                <div class="help-text">‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏ó‡∏µ‡πà‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏à‡∏∞‡∏ã‡∏∑‡πâ‡∏≠</div>
            </div>
            
            <div class="input-group">
                <label>‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå‡∏Å‡∏≤‡∏£‡∏™‡∏π‡∏ç‡πÄ‡∏™‡∏µ‡∏¢ (‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å+‡πÄ‡∏™‡∏µ‡∏¢) %</label>
                <input type="number" id="lossPercentInput" step="0.1" placeholder="‡πÄ‡∏ä‡πà‡∏ô 20" value="20">
                <div class="help-text">‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å+‡∏ú‡∏•‡πÑ‡∏°‡πâ‡πÄ‡∏™‡∏µ‡∏¢ (‡∏õ‡∏Å‡∏ï‡∏¥ 15-25%)</div>
            </div>
            
            <div class="input-group">
                <label>‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏ï‡πà‡∏≠‡∏ñ‡∏∏‡∏á (‡∏Å‡∏£‡∏±‡∏°)</label>
                <input type="number" id="bagWeightMin" placeholder="‡πÄ‡∏ä‡πà‡∏ô 500">
                <div class="help-text">‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏ú‡∏•‡πÑ‡∏°‡πâ‡∏ï‡πà‡∏≠‡∏ñ‡∏∏‡∏á‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏Ç‡∏≤‡∏¢</div>
            </div>
            
            <div class="input-group">
                <label>‡∏Å‡∏≥‡πÑ‡∏£‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ (‡∏ö‡∏≤‡∏ó)</label>
                <input type="number" id="minProfitRequired" step="0.01" placeholder="‡πÄ‡∏ä‡πà‡∏ô 150" value="0">
                <div class="help-text">‡∏Å‡∏≥‡πÑ‡∏£‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÑ‡∏î‡πâ (‡πÉ‡∏™‡πà 0 ‡∏ñ‡πâ‡∏≤‡πÅ‡∏Ñ‡πà‡πÑ‡∏°‡πà‡∏Ç‡∏≤‡∏î‡∏ó‡∏∏‡∏ô)</div>
            </div>
            
            <div style="text-align: center; margin: 20px 0; color: #666;">‡∏´‡∏£‡∏∑‡∏≠</div>
            
            <div class="input-group">
                <label>‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå‡∏Å‡∏≥‡πÑ‡∏£‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥ (%)</label>
                <input type="number" id="minProfitPercent" step="0.1" placeholder="‡πÄ‡∏ä‡πà‡∏ô 15">
                <div class="help-text">‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå‡∏Å‡∏≥‡πÑ‡∏£‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥‡∏ó‡∏µ‡πà‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡πÑ‡∏î‡πâ</div>
            </div>
            
            <div class="input-group">
                <label>‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° (‡∏ö‡∏≤‡∏ó)</label>
                <input type="number" id="additionalCost" step="0.01" placeholder="‡πÄ‡∏ä‡πà‡∏ô 50" value="0">
                <div class="help-text">‡∏Ñ‡πà‡∏≤‡πÅ‡∏£‡∏á ‡∏Ñ‡πà‡∏≤‡∏ñ‡∏∏‡∏á ‡∏Ñ‡πà‡∏≤‡∏Ç‡∏ô‡∏™‡πà‡∏á ‡∏Ø‡∏•‡∏Ø</div>
            </div>
            
            <button onclick="calculateMinCost()">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥</button>
        </div>
        
        <div id="result" class="result">
            <div class="result-item">
                <span class="result-label">‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏£‡∏ß‡∏° (‡∏ó‡∏µ‡πà‡∏ã‡∏∑‡πâ‡∏≠‡∏°‡∏≤):</span>
                <span id="totalCost" class="result-value"></span>
            </div>
            
            <div class="loss-info" id="lossInfo" style="display: none;">
                <div class="result-item">
                    <span class="result-label">‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏π‡∏ç‡πÄ‡∏™‡∏µ‡∏¢ (‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å):</span>
                    <span id="weightLoss" class="result-value" style="color: #ff9800;"></span>
                </div>
                <div class="result-item">
                    <span class="result-label">‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏π‡∏ç‡πÄ‡∏™‡∏µ‡∏¢:</span>
                    <span id="costLoss" class="result-value" style="color: #ff9800;"></span>
                </div>
                <div class="result-item">
                    <span class="result-label">‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå‡∏Å‡∏≤‡∏£‡∏™‡∏π‡∏ç‡πÄ‡∏™‡∏µ‡∏¢:</span>
                    <span id="lossPercent" class="result-value" style="color: #ff9800;"></span>
                </div>
                <div class="result-item">
                    <span class="result-label">‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏ï‡πà‡∏≠‡∏Å‡∏Å. (‡∏´‡∏•‡∏±‡∏á‡∏õ‡∏≠‡∏Å‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å):</span>
                    <span id="actualCostPerKg" class="result-value" style="color: #ff9800;"></span>
                </div>
            </div>
            
            <div class="result-item">
                <span class="result-label">‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£:</span>
                <span id="targetRevenue" class="result-value"></span>
            </div>
            <div class="highlight">
                <div class="result-item">
                    <span class="result-label">‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡∏ñ‡∏∏‡∏á:</span>
                    <span id="pricePerBag" class="result-value"></span>
                </div>
                <div class="result-item">
                    <span class="result-label">‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏ï‡πà‡∏≠‡∏ñ‡∏∏‡∏á:</span>
                    <span id="weightPerBag" class="result-value"></span>
                </div>
            </div>
            <div class="result-item" style="margin-top: 10px;">
                <span class="result-label">‡∏Å‡∏≥‡πÑ‡∏£‡∏£‡∏ß‡∏°:</span>
                <span id="totalProfit" class="result-value"></span>
            </div>
            <div class="result-item">
                <span class="result-label">‡∏Å‡∏≥‡πÑ‡∏£‡∏ï‡πà‡∏≠‡∏ñ‡∏∏‡∏á:</span>
                <span id="profitPerBag" class="result-value"></span>
            </div>
            <div class="result-item">
                <span class="result-label">‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå‡∏Å‡∏≥‡πÑ‡∏£:</span>
                <span id="profitPercent" class="result-value"></span>
            </div>
        </div>
    </div>

    <script>
        function switchTab(tab) {
            const normalTab = document.getElementById('normalTab');
            const reverseTab = document.getElementById('reverseTab');
            const minCostTab = document.getElementById('minCostTab');
            const buttons = document.querySelectorAll('.tab-btn');
            
            // ‡∏ã‡πà‡∏≠‡∏ô tab ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
            normalTab.style.display = 'none';
            reverseTab.style.display = 'none';
            minCostTab.style.display = 'none';
            
            // ‡∏•‡πâ‡∏≤‡∏á active class ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
            buttons.forEach(btn => btn.classList.remove('active'));
            
            if (tab === 'normal') {
                normalTab.style.display = 'block';
                buttons[0].classList.add('active');
            } else if (tab === 'reverse') {
                reverseTab.style.display = 'block';
                buttons[1].classList.add('active');
            } else if (tab === 'minCost') {
                minCostTab.style.display = 'block';
                buttons[2].classList.add('active');
            }
            
            document.getElementById('result').style.display = 'none';
        }
        
        function calculateLossInfo(originalWeight, weight, cost) {
            const weightLoss = originalWeight - weight;
            const costLoss = weightLoss * cost;
            const lossPercent = (weightLoss / originalWeight) * 100;
            const actualCostPerKg = (originalWeight * cost) / weight;
            
            document.getElementById('weightLoss').textContent = weightLoss.toFixed(2) + ' ‡∏Å‡∏Å.';
            document.getElementById('costLoss').textContent = costLoss.toFixed(2) + ' ‡∏ö‡∏≤‡∏ó';
            document.getElementById('lossPercent').textContent = lossPercent.toFixed(1) + '%';
            document.getElementById('actualCostPerKg').textContent = actualCostPerKg.toFixed(2) + ' ‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å.';
            
            return { weightLoss, costLoss, lossPercent, actualCostPerKg };
        }
        
        function calculateReverse() {
            const cost = parseFloat(document.getElementById('costRev').value);
            const originalWeight = parseFloat(document.getElementById('originalWeightRev').value);
            const weight = parseFloat(document.getElementById('weightRev').value);
            const targetWeight = parseFloat(document.getElementById('targetWeight').value);
            const targetPercent = parseFloat(document.getElementById('targetPercent').value);
            const targetProfitRev = parseFloat(document.getElementById('targetProfitRev').value) || 0;
            
            if (!cost || !originalWeight || !weight || !targetWeight) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô');
                return;
            }
            
            if (originalWeight < weight) {
                alert('‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏ó‡∏µ‡πà‡∏ã‡∏∑‡πâ‡∏≠‡∏°‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏´‡∏•‡∏±‡∏á‡∏õ‡∏≠‡∏Å‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å');
                return;
            }
            
            if (!targetPercent && !targetProfitRev) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå‡∏Å‡∏≥‡πÑ‡∏£‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ ‡∏´‡∏£‡∏∑‡∏≠ ‡∏Å‡∏≥‡πÑ‡∏£‡∏£‡∏ß‡∏°‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£');
                return;
            }
            
            if (targetPercent && targetProfitRev) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÉ‡∏î‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏´‡∏ô‡∏∂‡πà‡∏á (‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå‡∏Å‡∏≥‡πÑ‡∏£ ‡∏´‡∏£‡∏∑‡∏≠ ‡∏Å‡∏≥‡πÑ‡∏£‡∏£‡∏ß‡∏°)');
                return;
            }
            
            const totalCost = cost * originalWeight; // ‡πÉ‡∏ä‡πâ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏ï‡πâ‡∏ô‡∏â‡∏ö‡∏±‡∏ö
            const bags = (weight * 1000) / targetWeight;
            const actualWeightPerBag = (weight * 1000) / bags;
            
            // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏™‡∏π‡∏ç‡πÄ‡∏™‡∏µ‡∏¢
            calculateLossInfo(originalWeight, weight, cost);
            document.getElementById('lossInfo').style.display = 'block';
            
            let totalProfit;
            if (targetPercent) {
                totalProfit = (totalCost * targetPercent) / 100;
            } else {
                totalProfit = targetProfitRev;
            }
            
            const targetRevenue = totalCost + totalProfit;
            const pricePerBag = targetRevenue / bags;
            const profitPerBag = totalProfit / bags;
            const profitPercent = (totalProfit / totalCost) * 100;
            
            document.getElementById('totalCost').textContent = totalCost.toFixed(2) + ' ‡∏ö‡∏≤‡∏ó';
            document.getElementById('targetRevenue').textContent = targetRevenue.toFixed(2) + ' ‡∏ö‡∏≤‡∏ó';
            document.getElementById('pricePerBag').textContent = pricePerBag.toFixed(2) + ' ‡∏ö‡∏≤‡∏ó';
            document.getElementById('weightPerBag').textContent = actualWeightPerBag.toFixed(0) + ' ‡∏Å‡∏£‡∏±‡∏°';
            document.getElementById('totalProfit').textContent = totalProfit.toFixed(2) + ' ‡∏ö‡∏≤‡∏ó';
            document.getElementById('profitPerBag').textContent = profitPerBag.toFixed(2) + ' ‡∏ö‡∏≤‡∏ó';
            document.getElementById('profitPercent').textContent = profitPercent.toFixed(1) + '%';
            
            // ‡πÅ‡∏™‡∏î‡∏á‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ñ‡∏∏‡∏á
            const bagsInfo = document.getElementById('bagsInfo') || document.createElement('div');
            bagsInfo.id = 'bagsInfo';
            bagsInfo.className = 'result-item';
            bagsInfo.innerHTML = `<span class="result-label">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ñ‡∏∏‡∏á‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ:</span><span class="result-value" style="color: #2196F3; font-weight: bold;">${bags.toFixed(1)} ‡∏ñ‡∏∏‡∏á</span>`;
            
            const resultDiv = document.getElementById('result');
            if (!document.getElementById('bagsInfo')) {
                resultDiv.insertBefore(bagsInfo, resultDiv.firstChild);
            }
            
            // ‡∏à‡∏±‡∏î‡∏™‡∏µ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
            if (totalProfit < 0) {
                document.getElementById('totalProfit').style.color = 'red';
                document.getElementById('profitPerBag').style.color = 'red';
                document.getElementById('profitPercent').style.color = 'red';
            } else {
                document.getElementById('totalProfit').style.color = '#4CAF50';
                document.getElementById('profitPerBag').style.color = '#4CAF50';
                document.getElementById('profitPercent').style.color = '#4CAF50';
            }
            
            document.getElementById('result').style.display = 'block';
        }
        
        function calculateMinCost() {
            const targetSellPrice = parseFloat(document.getElementById('targetSellPrice').value);
            const plannedWeight = parseFloat(document.getElementById('plannedWeight').value);
            const lossPercent = parseFloat(document.getElementById('lossPercentInput').value);
            const bagWeight = parseFloat(document.getElementById('bagWeightMin').value);
            const minProfitRequired = parseFloat(document.getElementById('minProfitRequired').value) || 0;
            const minProfitPercent = parseFloat(document.getElementById('minProfitPercent').value);
            const additionalCost = parseFloat(document.getElementById('additionalCost').value) || 0;
            
            if (!targetSellPrice || !plannedWeight || !lossPercent || !bagWeight) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô (‡∏¢‡∏Å‡πÄ‡∏ß‡πâ‡∏ô‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°)');
                return;
            }
            
            if (minProfitRequired && minProfitPercent) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÉ‡∏î‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏´‡∏ô‡∏∂‡πà‡∏á (‡∏Å‡∏≥‡πÑ‡∏£‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥ ‡∏´‡∏£‡∏∑‡∏≠ ‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå‡∏Å‡∏≥‡πÑ‡∏£)');
                return;
            }
            
            if (lossPercent >= 100) {
                alert('‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå‡∏Å‡∏≤‡∏£‡∏™‡∏π‡∏ç‡πÄ‡∏™‡∏µ‡∏¢‡∏ï‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ 100%');
                return;
            }
            
            // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏´‡∏•‡∏±‡∏á‡∏™‡∏π‡∏ç‡πÄ‡∏™‡∏µ‡∏¢
            const remainingWeight = plannedWeight * (100 - lossPercent) / 100;
            
            // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ñ‡∏∏‡∏á‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ
            const totalBags = (remainingWeight * 1000) / bagWeight;
            
            // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏£‡∏ß‡∏°
            const totalRevenue = targetSellPrice * totalBags;
            
            // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡πÑ‡∏î‡πâ
            let maxAcceptableCost;
            
            if (minProfitPercent) {
                // ‡∏ñ‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå‡∏Å‡∏≥‡πÑ‡∏£: Revenue = Cost * (1 + Profit%)
                // Cost = Revenue / (1 + Profit%)
                maxAcceptableCost = (totalRevenue - additionalCost) / (1 + minProfitPercent / 100);
            } else {
                // ‡∏ñ‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏Å‡∏≥‡πÑ‡∏£‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥: Cost = Revenue - Profit - Additional Cost
                maxAcceptableCost = totalRevenue - minProfitRequired - additionalCost;
            }
            
            // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≠‡∏Å‡∏¥‡πÇ‡∏•‡∏Å‡∏£‡∏±‡∏°‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î
            const maxCostPerKg = maxAcceptableCost / plannedWeight;
            
            // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡πà‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•
            const actualProfit = totalRevenue - maxAcceptableCost - additionalCost;
            const actualProfitPercent = (actualProfit / maxAcceptableCost) * 100;
            const weightLoss = plannedWeight - remainingWeight;
            const actualCostPerKgAfterLoss = maxAcceptableCost / remainingWeight;
            
            // ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
            document.getElementById('totalCost').textContent = maxAcceptableCost.toFixed(2) + ' ‡∏ö‡∏≤‡∏ó';
            document.getElementById('targetRevenue').textContent = totalRevenue.toFixed(2) + ' ‡∏ö‡∏≤‡∏ó';
            document.getElementById('pricePerBag').textContent = targetSellPrice.toFixed(2) + ' ‡∏ö‡∏≤‡∏ó';
            document.getElementById('weightPerBag').textContent = bagWeight.toFixed(0) + ' ‡∏Å‡∏£‡∏±‡∏°';
            document.getElementById('totalProfit').textContent = actualProfit.toFixed(2) + ' ‡∏ö‡∏≤‡∏ó';
            document.getElementById('profitPerBag').textContent = (actualProfit / totalBags).toFixed(2) + ' ‡∏ö‡∏≤‡∏ó';
            document.getElementById('profitPercent').textContent = actualProfitPercent.toFixed(1) + '%';
            
            // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏™‡∏π‡∏ç‡πÄ‡∏™‡∏µ‡∏¢
            document.getElementById('weightLoss').textContent = weightLoss.toFixed(2) + ' ‡∏Å‡∏Å.';
            document.getElementById('costLoss').textContent = (weightLoss * maxCostPerKg).toFixed(2) + ' ‡∏ö‡∏≤‡∏ó';
            document.getElementById('lossPercent').textContent = lossPercent.toFixed(1) + '%';
            document.getElementById('actualCostPerKg').textContent = actualCostPerKgAfterLoss.toFixed(2) + ' ‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å.';
            document.getElementById('lossInfo').style.display = 'block';
            
            // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö tab ‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥
            const minCostInfo = document.getElementById('minCostInfo') || document.createElement('div');
            minCostInfo.id = 'minCostInfo';
            minCostInfo.className = 'highlight';
            minCostInfo.style.background = '#e3f2fd';
            minCostInfo.style.borderLeft = '4px solid #2196F3';
            minCostInfo.innerHTML = `
                <div style="text-align: center; font-weight: bold; color: #1976D2; margin-bottom: 10px;">
                    üí° ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏Å‡∏≤‡∏£‡∏ã‡∏∑‡πâ‡∏≠
                </div>
                <div class="result-item">
                    <span class="result-label">‡∏ã‡∏∑‡πâ‡∏≠‡πÉ‡∏ô‡∏£‡∏≤‡∏Ñ‡∏≤‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô:</span>
                    <span class="result-value" style="color: #1976D2; font-size: 18px; font-weight: bold;">${maxCostPerKg.toFixed(2)} ‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å.</span>
                </div>
                <div class="result-item">
                    <span class="result-label">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ñ‡∏∏‡∏á‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ:</span>
                    <span class="result-value" style="color: #1976D2;">${totalBags.toFixed(1)} ‡∏ñ‡∏∏‡∏á</span>
                </div>
                <div class="result-item">
                    <span class="result-label">‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠:</span>
                    <span class="result-value" style="color: #1976D2;">${remainingWeight.toFixed(2)} ‡∏Å‡∏Å.</span>
                </div>
                ${additionalCost > 0 ? `
                <div class="result-item">
                    <span class="result-label">‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°:</span>
                    <span class="result-value" style="color: #ff9800;">${additionalCost.toFixed(2)} ‡∏ö‡∏≤‡∏ó</span>
                </div>` : ''}
            `;
            
            const resultDiv = document.getElementById('result');
            if (!document.getElementById('minCostInfo')) {
                resultDiv.insertBefore(minCostInfo, resultDiv.firstChild);
            }
            
            // ‡∏ã‡πà‡∏≠‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ñ‡∏∏‡∏á‡∏õ‡∏Å‡∏ï‡∏¥
            const bagsInfo = document.getElementById('bagsInfo');
            if (bagsInfo) bagsInfo.style.display = 'none';
            
            // ‡∏à‡∏±‡∏î‡∏™‡∏µ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
            if (maxCostPerKg <= 0) {
                alert('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ó‡∏≥‡∏Å‡∏≥‡πÑ‡∏£‡πÑ‡∏î‡πâ‡∏î‡πâ‡∏ß‡∏¢‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≤‡∏¢‡∏ô‡∏µ‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏î‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≤‡∏¢ ‡∏´‡∏£‡∏∑‡∏≠ ‡∏•‡∏î‡∏Å‡∏≥‡πÑ‡∏£‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£');
                return;
            }
            
            document.getElementById('totalProfit').style.color = '#4CAF50';
            document.getElementById('profitPerBag').style.color = '#4CAF50';
            document.getElementById('profitPercent').style.color = '#4CAF50';
            
            document.getElementById('result').style.display = 'block';
        }
        
        function calculate() {
            const cost = parseFloat(document.getElementById('cost').value);
            const originalWeight = parseFloat(document.getElementById('originalWeight').value);
            const weight = parseFloat(document.getElementById('weight').value);
            const bags = parseFloat(document.getElementById('bags').value);
            const profit = parseFloat(document.getElementById('profit').value) || 0;
            const targetPrice = parseFloat(document.getElementById('targetPrice').value);
            
            if (!cost || !originalWeight || !weight || !bags) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô');
                return;
            }
            
            if (originalWeight < weight) {
                alert('‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏ó‡∏µ‡πà‡∏ã‡∏∑‡πâ‡∏≠‡∏°‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏´‡∏•‡∏±‡∏á‡∏õ‡∏≠‡∏Å‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å');
                return;
            }
            
            if (!profit && !targetPrice) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Å‡∏≥‡πÑ‡∏£‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ ‡∏´‡∏£‡∏∑‡∏≠ ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡∏ñ‡∏∏‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£');
                return;
            }
            
            if (profit && targetPrice) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÉ‡∏î‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏´‡∏ô‡∏∂‡πà‡∏á (‡∏Å‡∏≥‡πÑ‡∏£‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ ‡∏´‡∏£‡∏∑‡∏≠ ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡∏ñ‡∏∏‡∏á)');
                return;
            }
            
            const totalCost = cost * originalWeight; // ‡πÉ‡∏ä‡πâ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏ï‡πâ‡∏ô‡∏â‡∏ö‡∏±‡∏ö
            
            // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏™‡∏π‡∏ç‡πÄ‡∏™‡∏µ‡∏¢
            calculateLossInfo(originalWeight, weight, cost);
            document.getElementById('lossInfo').style.display = 'block';
            
            let targetRevenue, pricePerBag, totalProfit;
            
            if (targetPrice) {
                pricePerBag = targetPrice;
                targetRevenue = targetPrice * bags;
                totalProfit = targetRevenue - totalCost;
            } else {
                totalProfit = profit;
                targetRevenue = totalCost + profit;
                pricePerBag = targetRevenue / bags;
            }
            
            const weightPerBag = (weight * 1000) / bags;
            const profitPerBag = totalProfit / bags;
            const profitPercent = (totalProfit / totalCost) * 100;
            
            document.getElementById('totalCost').textContent = totalCost.toFixed(2) + ' ‡∏ö‡∏≤‡∏ó';
            document.getElementById('targetRevenue').textContent = targetRevenue.toFixed(2) + ' ‡∏ö‡∏≤‡∏ó';
            document.getElementById('pricePerBag').textContent = pricePerBag.toFixed(2) + ' ‡∏ö‡∏≤‡∏ó';
            document.getElementById('weightPerBag').textContent = weightPerBag.toFixed(0) + ' ‡∏Å‡∏£‡∏±‡∏°';
            document.getElementById('totalProfit').textContent = totalProfit.toFixed(2) + ' ‡∏ö‡∏≤‡∏ó';
            document.getElementById('profitPerBag').textContent = profitPerBag.toFixed(2) + ' ‡∏ö‡∏≤‡∏ó';
            document.getElementById('profitPercent').textContent = profitPercent.toFixed(1) + '%';
            
            // ‡∏ã‡πà‡∏≠‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ñ‡∏∏‡∏á‡πÉ‡∏ô‡πÇ‡∏´‡∏°‡∏î‡∏õ‡∏Å‡∏ï‡∏¥
            const bagsInfo = document.getElementById('bagsInfo');
            if (bagsInfo) bagsInfo.style.display = 'none';
            
            // ‡∏à‡∏±‡∏î‡∏™‡∏µ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
            if (totalProfit < 0) {
                document.getElementById('totalProfit').style.color = 'red';
                document.getElementById('profitPerBag').style.color = 'red';
                document.getElementById('profitPercent').style.color = 'red';
            } else {
                document.getElementById('totalProfit').style.color = '#4CAF50';
                document.getElementById('profitPerBag').style.color = '#4CAF50';
                document.getElementById('profitPercent').style.color = '#4CAF50';
            }
            
            document.getElementById('result').style.display = 'block';
        }
        
        // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏î Enter ‡πÅ‡∏•‡∏∞‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
        document.querySelectorAll('input').forEach(input => {
            input.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    if (this.id.includes('Rev') || this.id.includes('target')) {
                        calculateReverse();
                    } else if (this.id.includes('Min') || this.id.includes('Sell') || this.id.includes('planned') || this.id.includes('loss') || this.id.includes('bag') || this.id.includes('additional')) {
                        calculateMinCost();
                    } else {
                        calculate();
                    }
                }
            });
            
            input.addEventListener('input', function() {
                if (this.id === 'profit' && this.value) {
                    document.getElementById('targetPrice').value = '';
                } else if (this.id === 'targetPrice' && this.value) {
                    document.getElementById('profit').value = '';
                } else if (this.id === 'targetPercent' && this.value) {
                    document.getElementById('targetProfitRev').value = '';
                } else if (this.id === 'targetProfitRev' && this.value) {
                    document.getElementById('targetPercent').value = '';
                } else if (this.id === 'minProfitRequired' && this.value) {
                    document.getElementById('minProfitPercent').value = '';
                } else if (this.id === 'minProfitPercent' && this.value) {
                    document.getElementById('minProfitRequired').value = '';
                }
            });
        });
    </script>
</body>
</html>